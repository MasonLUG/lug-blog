<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>SSH Setup | GMU Linux Users Group</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="SSH Setup" />
<meta name="author" content="Zach Osman" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Learn how to setup ssh keys!" />
<meta property="og:description" content="Learn how to setup ssh keys!" />
<link rel="canonical" href="masonlug.github.io/lug-blog/2021/07/06/ssh.html" />
<meta property="og:url" content="masonlug.github.io/lug-blog/2021/07/06/ssh.html" />
<meta property="og:site_name" content="GMU Linux Users Group" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-07-06T13:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="SSH Setup" />
<script type="application/ld+json">
{"description":"Learn how to setup ssh keys!","url":"masonlug.github.io/lug-blog/2021/07/06/ssh.html","@type":"BlogPosting","headline":"SSH Setup","dateModified":"2021-07-06T13:00:00+00:00","datePublished":"2021-07-06T13:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"masonlug.github.io/lug-blog/2021/07/06/ssh.html"},"author":{"@type":"Person","name":"Zach Osman"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/lug-blog/assets/main.css"><link type="application/atom+xml" rel="alternate" href="masonlug.github.io/lug-blog/feed.xml" title="GMU Linux Users Group" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/lug-blog/">GMU Linux Users Group</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/lug-blog/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">SSH Setup</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-07-06T13:00:00+00:00" itemprop="datePublished">Jul 6, 2021
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Zach Osman</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Learn how to setup ssh keys!</p>

<h4 id="man-page-description">Man Page Description</h4>
<p>ssh (SSH client) is a program for logging into a remote machine and for executing commands on a remote machine.  It is intended
to provide secure encrypted communications between two untrusted hosts over an insecure network.  X11 connections, arbitrary TCP
ports and UNIX-domain sockets can also be forwarded over the secure channel.</p>

<h2 id="intro">Intro</h2>
<p>SSH, or Secure Shell Protocol is a program for logging into a remote machine and executing commands on that remote machine. SSH typically operates over network port <code class="language-plaintext highlighter-rouge">22</code> but can be changed depending on the remote machine’s configuration.</p>

<h3 id="usage">Usage</h3>

<p>TL;DR- Simple usage:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh user@hostname
</code></pre></div></div>

<h3 id="example">Example</h3>
<p>In this example, I’ll walk through setting up an ssh config for a remote machine already running an ssh server, in this example, a RaspberryPI</p>

<p>Here, we’re running ssh with user as pi, and hostname being the IP address of the machine.
<img src="/lug-blog/assets/2021-07-02-ssh/fig1.png" alt="Figure 1" /></p>

<p>There are a few problems with this though, one being you have to remember your password and enter it every time you login. The other being that you also have to remember the IP address of the machine to login, lets improve this.</p>

<h3 id="ssh-config">SSH Config</h3>

<p>If the folder <code class="language-plaintext highlighter-rouge">~/.ssh</code> doesn’t exist, create it.</p>

<p>After that, we add this to <code class="language-plaintext highlighter-rouge">~/.ssh/config</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host foo 
       HostName x.x.x.x 
       User pi
</code></pre></div></div>

<p><strong>NOTE</strong>: You’ll want to replace <code class="language-plaintext highlighter-rouge">Host</code> with a nickname for the server, <code class="language-plaintext highlighter-rouge">HostName</code> with the machines IP address, and <code class="language-plaintext highlighter-rouge">User</code> with the user for the remote machine (in my case, <code class="language-plaintext highlighter-rouge">pi</code>).</p>

<p>At this point you’ll be able to login only using the following command and entering your password.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh foo
</code></pre></div></div>

<h3 id="ssh-keys">SSH Keys</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-t</span> ed25519 <span class="nt">-f</span> ~/.ssh/foo <span class="nt">-C</span> <span class="s2">"Nickname for your local machine"</span>
</code></pre></div></div>

<p><strong>NOTE</strong>: You’ll want to replace <code class="language-plaintext highlighter-rouge">foo</code> with the same name you chose in the <code class="language-plaintext highlighter-rouge">Host</code> line in your ssh config.</p>

<p>When prompted for an ssh password I recommend to leave it blank. To put as password is more secure, however this requires you to enter this password every time you use the key, which is why it’s rare to see keys with passwords. Some workplaces enforce that you create a password for your private key. While it’s possible to brute force the password for these keys, if your key is compromised, having a password will buy you some time while the attacker attemps to brute force the password.</p>

<p>We give the key a nickname for the local machine so that it’s easier to revoke the key for an old/compromised machine.</p>

<p><strong>Setup on remote machine</strong></p>

<p><strong>NOTE</strong> <code class="language-plaintext highlighter-rouge">ssh-copy-id</code> can do some of this automatically, for more <code class="language-plaintext highlighter-rouge">man ssh-copy-id</code></p>

<p>Next up we have to add the public part of our key to the host machines <code class="language-plaintext highlighter-rouge">authorized_keys</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-copy-id <span class="nt">-i</span> ~/.ssh/foo.pub foo
</code></pre></div></div>

<p><strong>OR</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> ~/.ssh/foo.pub | ssh foo <span class="s2">"mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys"</span>
</code></pre></div></div>

<p>Now lets update the ssh config to include this key.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host foo
       HostName x.x.x.x
       User pi
       IdentityFile ~/.ssh/foo
</code></pre></div></div>

<p><strong>NOTE</strong>: You’ll want to replace <code class="language-plaintext highlighter-rouge">Host</code> with a nickname for the server, <code class="language-plaintext highlighter-rouge">HostName</code> with the machines IP address, and <code class="language-plaintext highlighter-rouge">User</code> with the user for the remote machine (in my case, <code class="language-plaintext highlighter-rouge">pi</code>).</p>

<h3 id="usage-with-full-config">Usage with full config</h3>

<p>Now will the full configuration, we will be able to just run the following command, and automatically login.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh foo
</code></pre></div></div>

<h5 id="sources">Sources:</h5>
<p><a href="https://www.openssh.com/manual.html">https://www.openssh.com/manual.html</a></p>

  </div><a class="u-url" href="/lug-blog/2021/07/06/ssh.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/lug-blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">GMU Linux Users Group</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">GMU Linux Users Group</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/masonlug"><svg class="svg-icon"><use xlink:href="/lug-blog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">masonlug</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>The Official Blog of the George Mason University Linux Users Group https://discord.gg/VEgGfVsTjR</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
